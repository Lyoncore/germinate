.Dd Jul 18, 2007
.Os Ubuntu
.ds volume-operating-system Ubuntu
.Dt GERMINATE\-UPDATE\-METAPACKAGE 1
.Sh NAME
.Nm germinate\-update\-metapackage
.Nd update a set of metapackages generated from seeds
.Sh SYNOPSIS
.Nm
.Op Fl Fl bzr
.Op Ar dist
.Sh DESCRIPTION
.Nm
assists with the construction and update of
.Dq metapackages
(packages consisting solely of a list of dependencies) from a list of seed
packages.
It updates binary package stanzas in
.Pa debian/control
to reflect the current contents of the seeds, and updates
.Pa debian/changelog
with a description of the changes it made.
.Pp
.Nm
requires a configuration file, called
.Pa update.cfg ,
in the current directory.
The format is described below.
.Pp
If a non-option argument is given, it specifies the distribution for which
metapackages should be generated (e.g.\&
.Dq unstable ) .
.Sh OPTIONS
.Bl -tag -width 4n
.It Fl Fl bzr
Check out seeds from the
.Ic bzr
branch defined in the configuration file rather than fetching them directly
from the URL defined there.
Requires
.Ic bzr
to be installed.
.El
.Sh CONFIGURATION FILE
.Pa update.cfg
uses Python's ConfigParser configuration file syntax, supporting
interpolation as defined by SafeConfigParser.
It should have a
.Li DEFAULT
section with a
.Li dist
key indicating the default distribution, and a
.Ar dist
section (corresponding to that distribution).
It may also have a
.Ar dist Ns Li /bzr
section which can override the
.Li seed_base
and
.Li seed_dist
values from the
.Ar dist
section if the
.Fl Fl bzr
option is given.
The following keys are recognised in distribution sections:
.Bl -tag -width 4n
.It Li seeds No (mandatory)
Pass these seeds to the germinator for processing.
This list is not automatically expanded for seed inheritance, so you must
list all seeds from which the seeds you care about inherit.
.It Li output_seeds No (optional)
Generate metapackages for these seeds.
If not specified, the value of
.Li seeds
is used.
.It Li architectures No (mandatory)
Generate metapackages for these architectures.
.It Li archive_base/default No (optional)
Use this URL as the default base for fetching package indices from the
archive; for examples of valid URLs, see
.Li deb
lines in
.Pa /etc/apt/sources.list ,
or the
.Ar MIRROR
argument to
.Xr debootstrap 8 .
.It Li archive_base/ Ns Ar arch No (optional)
Use this URL as the base for fetching package indices from the archive for
the specified architecture.
For each architecture being processed, at least one of
.Li archive_base/default
and
.Li archive_base/ Ns Ar arch
must be present.
.It Li seed_base No (mandatory)
The base URL for fetching seeds.
.It Li seed_dist No (optional)
The tail of the URL for fetching seeds.
This will be appended to
.Li seed_base .
You will often want to interpolate the value of
.Li dist
into this value using ConfigParser's
.Li %(dist)s
syntax.
If not specified, the value of
.Li dist
is used.
.It Li components No (mandatory)
The archive components from which to fetch package indices.
.It Li seed_map/ Ns Ar seed No (optional)
The seeds to be used as input for the metapackage corresponding to
.Ar seed .
If specified, this will typically be the list of seeds from which
.Ar seed
inherits, plus
.Ar seed
itself.
.El
.Sh EXAMPLE
At the time of writing, the following configuration file is used to generate
the
.Li kubuntu-meta
source package in the Ubuntu archive:
.Bd -literal -offset indent
[DEFAULT]
dist: hardy

[hardy]
seeds: required minimal standard desktop
output_seeds: desktop
architectures: i386 amd64 powerpc ia64 sparc hppa
seed_base: http://people.ubuntu.com/~ubuntu-archive/seeds/
seed_dist: kubuntu.%(dist)s
archive_base/default: http://archive.ubuntu.com/ubuntu/
archive_base/ports: http://ports.ubuntu.com/ubuntu-ports/
archive_base/hppa: %(archive_base/ports)s
archive_base/ia64: %(archive_base/ports)s
archive_base/powerpc: %(archive_base/ports)s
components: main restricted

[hardy/bzr]
seed_base: sftp://bazaar.launchpad.net/~ubuntu-core-dev/ubuntu-seeds/
seed_dist: kubuntu.%(dist)s
.Ed
.Sh BUGS
.Li output_seeds
and
.Li seed_map
are awkward warts, and should be replaced by code to follow seed inheritance
automatically as necessary.
.Sh AUTHORS
.An Gustavo Franco Aq stratus@debian.org
.An Colin Watson Aq cjwatson@canonical.com
.Pp
.An -nosplit
.Nm
is copyright \(co 2004, 2005, 2006, 2007
.An Canonical Ltd.
and
copyright \(co 2006
.An Gustavo Franco .
See the GNU General Public License version 2 or later for copying
conditions.
A copy of the GNU General Public License is available in
.Pa /usr/share/common\-licenses/GPL .
